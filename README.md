**InStockè‚¡ç¥¨ç³»ç»Ÿ - Forkç‰ˆæœ¬**

> **ğŸ“Œ é¡¹ç›®æ¥æº**: æœ¬é¡¹ç›® Fork è‡ª [myhhub/stock](https://github.com/myhhub/stock/blob/master/README.md)ï¼Œåœ¨åŸé¡¹ç›®åŸºç¡€ä¸Šè¿›è¡Œäº†é‡è¦æ”¹è¿›å’Œä¼˜åŒ–ã€‚

## ğŸ”„ ä¸»è¦ä¿®æ”¹ä¸æ”¹è¿›

### 1. ğŸ—„ï¸ å¢åŠ æ•°æ®å¯¼å…¥å·¥å…·ï¼ˆå¯å•ç‹¬æ‰§è¡Œï¼‰
- æ–°å¢ **MySQL** å’Œ **ClickHouse** æ•°æ®å¯¼å…¥æ”¯æŒ
- æä¾›å®Œæ•´çš„å†å²æ•°æ®è·å–å’Œå¤„ç†å·¥å…·é“¾
- è¯¦ç»†æ–‡æ¡£å‚è§ï¼š[history_data/README.md](history_data/README.md)
- æ”¯æŒ baostock æ•°æ®æºï¼Œæ¯” akshare å’Œ tushare æ›´ç¨³å®š
- æ”¯æŒåˆ†ç‰‡å¹¶å‘æ‰§è¡Œï¼Œå¤§å¹…æå‡æ•°æ®è·å–æ•ˆç‡

### 2. ğŸ¨ ç•Œé¢ç»„ä»¶å¼€æºåŒ–  
- ä½¿ç”¨ **Luckysheet** å¼€æºæ–¹æ¡ˆæ›¿ä»£å•†ç”¨ç»„ä»¶
- ä¸å†ä¾èµ–è‘¡è„åŸç­‰ä»˜è´¹å‰ç«¯ç»„ä»¶
- é™ä½ä½¿ç”¨æˆæœ¬ï¼Œæé«˜é¡¹ç›®å¯ç»´æŠ¤æ€§

### 3. âš¡ æ€§èƒ½ä¼˜åŒ–ä¸æ¶æ„å‡çº§
- **å‡å°‘ API è°ƒç”¨**ï¼šæ¯å¤©åªçˆ¬å–å¢é‡æ•°æ®ï¼Œå…¶ä½™é‡‡ç”¨æœ¬åœ°æ•°æ®
- **ClickHouse å­˜å‚¨é‡æ„**ï¼šé‡å†™å­˜å‚¨ç›¸å…³é€»è¾‘
- å¤§å¹…æå‡æŸ¥è¯¢æ€§èƒ½å’Œæ•°æ®å¤„ç†æ•ˆç‡
- æ”¯æŒæµ·é‡å†å²æ•°æ®çš„é«˜æ•ˆå­˜å‚¨ä¸åˆ†æ
### 4. ğŸŒ ä»£ç†æ”¯æŒä¼˜åŒ–
- **æ™ºèƒ½ä»£ç†æ± è®¾è®¡**ï¼šæ”¯æŒå¤šç§ä»£ç†æœåŠ¡å•†çš„æ¥å£
- **ç¼“å­˜æœºåˆ¶**ï¼šé’ˆå¯¹çŸ­æ•ˆä»£ç†ï¼ˆ1-5åˆ†é’Ÿï¼‰è¿›è¡Œæ™ºèƒ½ç¼“å­˜ï¼Œé¿å…é¢‘ç¹è·å–
- **é…ç½®çµæ´»**ï¼šé»˜è®¤ä¸èµ°ä»£ç†ï¼Œå¯æ ¹æ®éœ€è¦é…ç½®ä¸åŒå“ç‰Œçš„ä»£ç†æœåŠ¡
- **æ•°æ®æºè¯´æ˜**ï¼šæ¯æ—¥æ•°æ®è·å–åŸºäºå°è£…çš„ akshare ä»ä¸œæ–¹è´¢å¯Œæ¥å£è·å–ï¼Œå»ºè®®é…ç½®ä»£ç†é¿å…IPé™åˆ¶
- **ä»£ç†é…ç½®**ï¼šæ ¹æ®è´­ä¹°çš„ä»£ç†å“ç‰Œä¿®æ”¹ `proxy_pool.py` å³å¯ï¼Œå½“å‰ç¤ºä¾‹ä¸ºé’æœæŒ‰é‡ä»˜è´¹çŸ­æ•ˆä»£ç†

### 5. AI agentå¼•å…¥ï¼ˆå¼€å‘ä¸­ï¼‰
- åŸºäºæ¯æ—¥çš„ç­–ç•¥æ•°æ®ï¼Œé€šè¿‡AIè¿›è¡Œåˆ†ææŒ–æ˜
- AIè‡ªåŠ¨å‘æ˜ç­–ç•¥
---

## ğŸ“– åŸé¡¹ç›®ä»‹ç»

InStockè‚¡ç¥¨ç³»ç»Ÿï¼ŒæŠ“å–æ¯æ—¥è‚¡ç¥¨ã€ETFå…³é”®æ•°æ®ï¼Œè®¡ç®—è‚¡ç¥¨æŠ€æœ¯æŒ‡æ ‡ã€ç­¹ç åˆ†å¸ƒï¼Œè¯†åˆ«Kçº¿å„ç§å½¢æ€ï¼Œç»¼åˆé€‰è‚¡ï¼Œå†…ç½®å¤šç§é€‰è‚¡ç­–ç•¥ï¼Œæ”¯æŒé€‰è‚¡éªŒè¯å›æµ‹ï¼Œæ”¯æŒè‡ªåŠ¨äº¤æ˜“ï¼Œæ”¯æŒæ‰¹é‡æ—¶é—´ï¼Œè¿è¡Œé«˜æ•ˆï¼Œæ”¯æŒPCã€å¹³æ¿ã€æ‰‹æœºç§»åŠ¨è®¾å¤‡æ˜¾ç¤ºï¼ŒåŒæ—¶æä¾›Dockeré•œåƒæ–¹ä¾¿å®‰è£…ï¼Œæ˜¯é‡åŒ–æŠ•èµ„çš„å¥½å¸®æ‰‹ã€‚

The stock system,Capture key data on daily stocks and ETFs, calculate stock technical indicators, chip distribution, Position Cost Distribution(CYQ), identify various K-line forms, comprehensive stock selection, built-in multiple stock selection strategies, support stock selection verification and backtesting, support automatic trading, and support batch time , runs efficiently, supports display on PCs, tablets, and mobile phones, and provides Docker images for easy installation, making it a good helper for quantitative investment.

Dockeré•œåƒï¼šhttps://hub.docker.com/r/mayanghua/instock **é•œåƒä¼˜åŒ–æ„å»ºä»…170M**ã€‚

# åŠŸèƒ½ä»‹ç»

##  ä¸€ï¼šç»¼åˆé€‰è‚¡
ç»¼åˆé€‰è‚¡æ”¯æŒè‚¡ç¥¨èŒƒå›´ã€åŸºæœ¬é¢ã€æŠ€æœ¯é¢ã€æ¶ˆæ¯é¢ã€äººæ°”æŒ‡æ ‡ã€è¡Œæƒ…æ•°æ®ç­‰æ–¹é¢å…±200å¤šä¸ªä¿¡æ¯æ ç›®è¿›è¡Œè‡ªç”±ç»„åˆé€‰è‚¡ã€‚é€‰è‚¡æ¡ä»¶åˆ†ä¸ºä»¥ä¸‹å¤§ç±»ï¼š
```
1.è‚¡ç¥¨èŒƒå›´
å¸‚åœºã€ è¡Œä¸šã€åœ°åŒºã€ æ¦‚å¿µã€ é£æ ¼ã€æŒ‡æ•°æˆä»½ã€ ä¸Šå¸‚æ—¶é—´ã€‚
2.åŸºæœ¬é¢
ä¼°å€¼æŒ‡æ ‡ã€æ¯è‚¡æŒ‡æ ‡ã€ç›ˆåˆ©èƒ½åŠ›ã€æˆé•¿èƒ½åŠ›ã€èµ„æœ¬ç»“æ„ä¸å¿å€ºèƒ½åŠ›ã€è‚¡æœ¬è‚¡ä¸œã€‚
3.æŠ€æœ¯é¢
MACDé‡‘å‰ã€KDJé‡‘å‰ã€æ”¾é‡çªç ´ã€ä½ä½èµ„é‡‘å‡€æµå…¥ã€é«˜ä½èµ„é‡‘å‡€æµå‡ºã€å‘ä¸Šçªç ´å‡çº¿ã€å‡çº¿å¤šå¤´æ’åˆ—ã€å‡çº¿ç©ºå¤´æ’åˆ—ã€è¿æ¶¨æ”¾é‡ã€ä¸‹è·Œæ— é‡ã€ä¸€æ ¹å¤§é˜³çº¿ã€ä¸¤æ ¹å¤§é˜³çº¿ã€æ—­æ—¥ä¸œå‡ã€å¼ºåŠ¿å¤šæ–¹ã€ç‚®æ‹¨äº‘è§æ—¥ã€ä¸ƒä»™å¥³ä¸‹å‡¡(ä¸ƒè¿é˜´)ã€å…«ä»™è¿‡æµ·(å…«è¿é˜³)ã€ä¹é˜³ç¥åŠŸ(ä¹è¿é˜³)ã€å››ä¸²é˜³ã€å¤©é‡æ³•åˆ™ã€æ”¾é‡ä¸Šæ”»ã€ç©¿å¤´ç ´è„šã€å€’è½¬é”¤å¤´ã€å°„å‡»ä¹‹æ˜Ÿã€é»„æ˜ä¹‹æ˜Ÿã€æ›™å…‰åˆç°ã€èº«æ€€å…­ç”²ã€ä¹Œäº‘ç›–é¡¶ã€æ—©æ™¨ä¹‹æ˜Ÿã€çª„å¹…æ•´ç†ã€‚
4.æ¶ˆæ¯é¢
å…¬å‘Šå¤§äº‹ã€æœºæ„å…³æ³¨æƒ…å†µã€æœºæ„æŒè‚¡å®¶æ•°ã€æœºæ„æŒè‚¡æ¯”ä¾‹ã€‚
5.äººæ°”æŒ‡æ ‡
è‚¡å§äººæ°”æ’åã€äººæ°”æ’åå˜åŒ–ã€äººæ°”æ’åè¿æ¶¨ã€äººæ°”æ’åè¿è·Œã€äººæ°”æ’ååˆ›æ–°é«˜ã€äººæ°”æ’ååˆ›æ–°ä½ã€æ–°æ™‹ç²‰ä¸å æ¯”ã€é“æ†ç²‰ä¸å æ¯”ã€7æ—¥å…³æ³¨æ’åã€ä»Šæ—¥æµè§ˆæ’åã€‚
6.è¡Œæƒ…æ•°æ®
è‚¡ä»·è¡¨ç°ã€æˆäº¤æƒ…å†µã€èµ„é‡‘æµå‘ã€è¡Œæƒ…ç»Ÿè®¡ã€æ²ªæ·±è‚¡é€šã€‚
```
![](img/a3.jpg)
![](img/a1.jpg)

##  äºŒï¼šè‚¡ç¥¨æ¯æ—¥æ•°æ®

åŒ…æ‹¬æ¯æ—¥è‚¡ç¥¨æ•°æ®ã€è‚¡ç¥¨èµ„é‡‘æµå‘ã€è‚¡ç¥¨åˆ†çº¢é…é€ã€è‚¡ç¥¨é¾™è™æ¦œã€è‚¡ç¥¨å¤§å®—äº¤æ˜“ã€è‚¡ç¥¨åŸºæœ¬é¢æ•°æ®ã€è¡Œä¸šèµ„é‡‘æµå‘ã€æ¦‚å¿µèµ„é‡‘æµå‘ã€æ—©ç›˜æŠ¢ç­¹æ•°æ®ã€å°¾ç›˜æŠ¢ç­¹æ•°æ®ã€æ¶¨åœåŸå› æ­å¯†ã€æ¯æ—¥ETFæ•°æ®ã€‚

æŠ“å–Aè‚¡ç¥¨æ¯æ—¥æ•°æ®ï¼Œä¸»è¦ä¸ºä¸€äº›å…³é”®æ•°æ®ï¼ŒåŒæ—¶å°è£…æŠ“å–æ–¹æ³•ï¼Œæ–¹ä¾¿æ‰©å±•ç³»ç»Ÿè·å–ä¸ªäººå…³æ³¨çš„æ•°æ®ã€‚

![](img/00.jpg)
![](img/12.jpg)
## ä¸‰ï¼šè‚¡ç¥¨æŒ‡æ ‡è®¡ç®—
åŸºäºtalibã€pandas è®¡ç®—æŒ‡æ ‡ï¼Œè®¡ç®—é«˜æ•ˆå‡†ç¡®ã€‚è°ƒæ•´ä¸ªåˆ«æŒ‡æ ‡å…¬å¼ï¼Œç¡®ä¿ç»“æœå’ŒåŒèŠ±é¡ºã€é€šä¿¡è¾¾ç»“æœä¸€è‡´ã€‚
æŒ‡æ ‡ï¼š

```
1ã€MACD 2ã€KDJ 3ã€BOLL 4ã€TRIXï¼ŒTRMA 5ã€CR 6ã€SMA 7ã€RSI 
8ã€VRï¼ŒMAVR 9ã€ROC 10ã€DMIï¼Œ+DIï¼Œ-DIï¼ŒDXï¼ŒADXï¼ŒADXR 11ã€W&R 
12ã€CCI 13ã€TRã€ATR 14ã€DMAã€AMA 15ã€OBV 16ã€SAR 17ã€PSY 
18ã€BRAR 19ã€EMV 20ã€BIAS 21ã€TEMA  22ã€MFI 23ã€VWMA
24ã€PPO 25ã€WT 26ã€Supertrend  27ã€DPO  28ã€VHF  29ã€RVI
30ã€FI 31ã€ENE 32ã€STOCHRSI
```

![](img/01.jpg)
![](img/06.jpg)

## å››ï¼šåˆ¤æ–­ä¹°å…¥å–å‡ºçš„è‚¡ç¥¨

æ ¹æ®æŒ‡æ ‡åˆ¤å®šå¯èƒ½ä¹°å…¥å–å‡ºçš„è‚¡ç¥¨ï¼Œå…·ä½“ç­›é€‰æ¡ä»¶å¦‚ä¸‹ï¼š


```
KDJ:
1ã€è¶…ä¹°åŒºï¼šKå€¼åœ¨80ä»¥ä¸Šï¼ŒDå€¼åœ¨70ä»¥ä¸Šï¼ŒJå€¼å¤§äº90æ—¶ä¸ºè¶…ä¹°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‚¡ä»·æœ‰å¯èƒ½ä¸‹è·Œã€‚æŠ•èµ„è€…åº”è°¨æ…è¡Œäº‹ï¼Œå±€å¤–äººä¸åº”å†è¿½æ¶¨ï¼Œå±€å†…äººåº”é€‚æ—¶å–å‡ºã€‚
2ã€è¶…å–åŒºï¼šKå€¼åœ¨20ä»¥ä¸‹ï¼ŒDå€¼åœ¨30ä»¥ä¸‹ä¸ºè¶…å–åŒºã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‚¡ä»·æœ‰å¯èƒ½ä¸Šæ¶¨ï¼Œåå¼¹çš„å¯èƒ½æ€§å¢å¤§ã€‚å±€å†…äººä¸åº”è½»æ˜“æŠ›å‡ºè‚¡ç¥¨ï¼Œå±€å¤–äººå¯å¯»æœºå…¥åœºã€‚
RSI:
1ã€å½“å…­æ—¥æŒ‡æ ‡ä¸Šå‡åˆ°è¾¾80æ—¶ï¼Œè¡¨ç¤ºè‚¡å¸‚å·²æœ‰è¶…ä¹°ç°è±¡ï¼Œå¦‚æœä¸€æ—¦ç»§ç»­ä¸Šå‡ï¼Œè¶…è¿‡90ä»¥ä¸Šæ—¶ï¼Œåˆ™è¡¨ç¤ºå·²åˆ°ä¸¥é‡è¶…ä¹°çš„è­¦æˆ’åŒºï¼Œè‚¡ä»·å·²å½¢æˆå¤´éƒ¨ï¼Œæå¯èƒ½åœ¨çŸ­æœŸå†…åè½¬å›è½¬ã€‚
2ã€å½“å…­æ—¥å¼ºå¼±æŒ‡æ ‡ä¸‹é™è‡³20æ—¶ï¼Œè¡¨ç¤ºè‚¡å¸‚æœ‰è¶…å–ç°è±¡ï¼Œå¦‚æœä¸€æ—¦ç»§ç»­ä¸‹é™è‡³10ä»¥ä¸‹æ—¶åˆ™è¡¨ç¤ºå·²åˆ°ä¸¥é‡è¶…å–åŒºåŸŸï¼Œè‚¡ä»·æå¯èƒ½æœ‰æ­¢è·Œå›å‡çš„æœºä¼šã€‚
CCI:
1ã€å½“CCIï¼ï¹¢100æ—¶ï¼Œè¡¨æ˜è‚¡ä»·å·²ç»è¿›å…¥éå¸¸æ€åŒºé—´â€”â€”è¶…ä¹°åŒºé—´ï¼Œè‚¡ä»·çš„å¼‚åŠ¨ç°è±¡åº”å¤šåŠ å…³æ³¨ã€‚
2ã€å½“CCIï¼œï¹£100æ—¶ï¼Œè¡¨æ˜è‚¡ä»·å·²ç»è¿›å…¥å¦ä¸€ä¸ªéå¸¸æ€åŒºé—´â€”â€”è¶…å–åŒºé—´ï¼ŒæŠ•èµ„è€…å¯ä»¥é€¢ä½å¸çº³è‚¡ç¥¨ã€‚
CR:
1ã€è·Œç©¿aã€bã€cã€då››æ¡çº¿ï¼Œå†ç”±ä½ç‚¹å‘ä¸Šçˆ¬å‡160æ—¶ï¼Œä¸ºçŸ­çº¿è·åˆ©çš„ä¸€ä¸ªè‰¯æœºï¼Œåº”é€‚å½“å–å‡ºè‚¡ç¥¨ã€‚
2ã€CRè·Œè‡³40ä»¥ä¸‹æ—¶ï¼Œæ˜¯å»ºä»“è‰¯æœºã€‚
WR:
1ã€å½“ï¼…Rçº¿è¾¾åˆ°20æ—¶ï¼Œå¸‚åœºå¤„äºè¶…ä¹°çŠ¶å†µï¼Œèµ°åŠ¿å¯èƒ½å³å°†è§é¡¶ã€‚
2ã€å½“ï¼…Rçº¿è¾¾åˆ°80æ—¶ï¼Œå¸‚åœºå¤„äºè¶…å–çŠ¶å†µï¼Œè‚¡ä»·èµ°åŠ¿éšæ—¶å¯èƒ½è§åº•ã€‚
VR:
1ã€è·åˆ©åŒºåŸŸ160ï¼450æ ¹æ®æƒ…å†µè·åˆ©äº†ç»“ã€‚
2ã€ä½ä»·åŒºåŸŸ40ï¼70å¯ä»¥ä¹°è¿›ã€‚
```

![](img/05.jpg)

## äº”ï¼šKçº¿å½¢æ€è¯†åˆ«

ç²¾å‡†è¯†åˆ«61ç§Kçº¿å½¢æ€ï¼Œæ”¯æŒç”¨æˆ·è‡ªé€‰å½¢æ€è¯†åˆ«ã€‚

è¯†åˆ«å½¢æ€:

```
1ã€ä¸¤åªä¹Œé¸¦2ã€ä¸‰åªä¹Œé¸¦3ã€ä¸‰å†…éƒ¨ä¸Šæ¶¨å’Œä¸‹è·Œ4ã€ä¸‰çº¿æ‰“å‡»5ã€ä¸‰å¤–éƒ¨ä¸Šæ¶¨å’Œä¸‹è·Œ6ã€å—æ–¹ä¸‰æ˜Ÿ7ã€ä¸‰ä¸ªç™½å…µ8ã€å¼ƒå©´
9ã€å¤§æ•Œå½“å‰10ã€æ‰è…°å¸¦çº¿11ã€è„±ç¦»12ã€æ”¶ç›˜ç¼ºå½±çº¿13ã€è—å©´åæ²¡14ã€åå‡»çº¿15ã€ä¹Œäº‘å‹é¡¶16ã€åå­—17ã€åå­—æ˜Ÿ
18ã€èœ»èœ“åå­—/Tå½¢åå­—19ã€åå™¬æ¨¡å¼20ã€åå­—æš®æ˜Ÿ  21ã€æš®æ˜Ÿ22ã€å‘ä¸Š/ä¸‹è·³ç©ºå¹¶åˆ—é˜³çº¿23ã€å¢“ç¢‘åå­—/å€’Tåå­—
24ã€é”¤å¤´25ã€ä¸ŠåŠçº¿26ã€æ¯å­çº¿27ã€åå­—å­•çº¿28ã€é£é«˜æµªå¤§çº¿29ã€é™·é˜±30ã€ä¿®æ­£é™·é˜±31ã€å®¶é¸½32ã€ä¸‰èƒèƒä¹Œé¸¦
33ã€é¢ˆå†…çº¿34ã€å€’é”¤å¤´35ã€åå†²å½¢æ€36ã€ç”±è¾ƒé•¿ç¼ºå½±çº¿å†³å®šçš„åå†²å½¢æ€37ã€æ¢¯åº•38ã€é•¿è„šåå­—39ã€é•¿èœ¡çƒ›
40ã€å…‰å¤´å…‰è„š/ç¼ºå½±çº¿ 41ã€ç›¸åŒä½ä»·42ã€é“ºå«43ã€åå­—æ™¨æ˜Ÿ44ã€æ™¨æ˜Ÿ45ã€é¢ˆä¸Šçº¿46ã€åˆºé€å½¢æ€47ã€é»„åŒ…è½¦å¤«
48ã€ä¸Šå‡/ä¸‹é™ä¸‰æ³•49ã€åˆ†ç¦»çº¿50ã€å°„å‡»ä¹‹æ˜Ÿ51ã€çŸ­èœ¡çƒ›52ã€çººé”¤53ã€åœé¡¿å½¢æ€54ã€æ¡å½¢ä¸‰æ˜æ²»55ã€æ¢æ°´ç«¿
56ã€è·³ç©ºå¹¶åˆ—é˜´é˜³çº¿57ã€æ’å…¥58ã€ä¸‰æ˜Ÿ59ã€å¥‡ç‰¹ä¸‰æ²³åºŠ60ã€å‘ä¸Šè·³ç©ºçš„ä¸¤åªä¹Œé¸¦61ã€ä¸Šå‡/ä¸‹é™è·³ç©ºä¸‰æ³• 
```
å½¢æ€è¯†åˆ«ç»“æœï¼š
```
è´Ÿï¼šå‡ºç°å–å‡ºä¿¡å·
0ï¼šæ²¡æœ‰å‡ºç°è¯¥å½¢æ€
æ­£ï¼šå‡ºç°ä¹°å…¥ä¿¡å·
```
![](img/09.jpg)
![](img/13.jpg)

## å…­ï¼šç­¹ç åˆ†å¸ƒ

ç­¹ç åˆ†å¸ƒé€šè¿‡è®¡ç®—ä¸€å®šæ—¶é—´èŒƒå›´å†…è‚¡ç¥¨çš„:æœ€é«˜ä»·ã€æœ€ä½ä»·ã€æˆäº¤æ•°ï¼Œè¾“å‡ºå¯¹åº”ä»·æ ¼æˆäº¤æ•°å æ•´ä¸ªæµé€šç›˜æ¯”å€¼çš„åˆ†å¸ƒå›¾å½¢ã€‚è®¡ç®—é«˜æ•ˆå‡†ç¡®ï¼Œç»“æœä¸ä¸œæ–¹è´¢å¯Œç­‰ä¸“ä¸šè½¯ä»¶çš„ä¸€è‡´ï¼Œç¼ºçœè®¡ç®—210ä¸ªäº¤æ˜“æ—¥çš„æˆæœ¬ï¼Œå¯ä»¥è‡ªè¡Œè®¾å®šæ—¶é—´èŒƒå›´ã€‚
![](img/06.jpg)

## ä¸ƒï¼šç­–ç•¥é€‰è‚¡

å†…ç½®æ”¾é‡ä¸Šæ¶¨ã€åœæœºåªã€å›è¸©å¹´çº¿ã€çªç ´å¹³å°ã€æ”¾é‡è·Œåœç­‰å¤šç§é€‰è‚¡ç­–ç•¥ï¼ŒåŒæ—¶å°è£…äº†ç­–ç•¥æ¨¡æ¿ï¼Œæ–¹ä¾¿æ‰©å±•å®ç°è‡ªå·±çš„ç­–ç•¥ã€‚


```
1ã€æ”¾é‡ä¸Šæ¶¨
    1ï¼‰å½“æ—¥æ¯”å‰ä¸€å¤©ä¸Šæ¶¨å°äº2%æˆ–æ”¶ç›˜ä»·å°äºå¼€ç›˜ä»·ã€‚
    2ï¼‰å½“æ—¥æˆäº¤é¢ä¸ä½äº2äº¿ã€‚
    3ï¼‰å½“æ—¥æˆäº¤é‡/5æ—¥å¹³å‡æˆäº¤é‡>=2ã€‚
2ã€å‡çº¿å¤šå¤´
    MA30å‘ä¸Š
    1ï¼‰30æ—¥å‰çš„30æ—¥å‡çº¿<20æ—¥å‰çš„30æ—¥å‡çº¿<10æ—¥å‰çš„30æ—¥å‡çº¿<å½“æ—¥çš„30æ—¥å‡çº¿ã€‚
    2ï¼‰(å½“æ—¥çš„30æ—¥å‡çº¿/30æ—¥å‰çš„30æ—¥å‡çº¿)>1.2ã€‚
3ã€åœæœºåª
    1ï¼‰æœ€è¿‘15æ—¥æœ‰æ¶¨å¹…å¤§äº9.5%ï¼Œä¸”å¿…é¡»æ˜¯æ”¾é‡ä¸Šæ¶¨ã€‚
    2ï¼‰ç´§æ¥çš„ä¸‹ä¸ªäº¤æ˜“æ—¥å¿…é¡»é«˜å¼€ï¼Œæ”¶ç›˜ä»·å¿…é¡»ä¸Šæ¶¨ï¼Œä¸”ä¸å¼€ç›˜ä»·ä¸èƒ½å¤§äºç­‰äºç›¸å·®3%ã€‚
    3ï¼‰æ¥ä¸‹2ã€3ä¸ªäº¤æ˜“æ—¥å¿…é¡»é«˜å¼€ï¼Œæ”¶ç›˜ä»·å¿…é¡»ä¸Šæ¶¨ï¼Œä¸”ä¸å¼€ç›˜ä»·ä¸èƒ½å¤§äºç­‰äºç›¸å·®3%ï¼Œä¸”æ¯å¤©æ¶¨è·Œå¹…åœ¨5%é—´ã€‚
4ã€å›è¸©å¹´çº¿
    1ï¼‰åˆ†2ä¸ªæ—¶é—´æ®µï¼šå‰æ®µ=æœ€è¿‘60äº¤æ˜“æ—¥æœ€é«˜æ”¶ç›˜ä»·ä¹‹å‰äº¤æ˜“æ—¥(é•¿åº¦>0)ï¼Œåæ®µ=æœ€é«˜ä»·å½“æ—¥åŠåé¢çš„äº¤æ˜“æ—¥ã€‚
    2ï¼‰å‰æ®µç”±å¹´çº¿(250æ—¥)ä»¥ä¸‹å‘ä¸Šçªç ´ã€‚
    3ï¼‰åæ®µå¿…é¡»åœ¨å¹´çº¿ä»¥ä¸Šè¿è¡Œï¼Œä¸”åæ®µæœ€ä½ä»·æ—¥ä¸æœ€é«˜ä»·æ—¥ç›¸å·®å¿…é¡»åœ¨10-50æ—¥é—´ã€‚
    4ï¼‰å›è¸©ä¼´éšç¼©é‡ï¼šæœ€é«˜ä»·æ—¥äº¤æ˜“é‡/åæ®µæœ€ä½ä»·æ—¥äº¤æ˜“é‡>2,åæ®µæœ€ä½ä»·/æœ€é«˜ä»·<0.8ã€‚
5ã€çªç ´å¹³å°
    1ï¼‰60æ—¥å†…æŸæ—¥æ”¶ç›˜ä»·>=60æ—¥å‡çº¿>å¼€ç›˜ä»·ã€‚
    2ï¼‰ä¸”ã€1ã€‘æ”¾é‡ä¸Šæ¶¨ã€‚
    3ï¼‰ä¸”ã€1ã€‘é—´ä¹‹å‰æ—¶é—´ï¼Œä»»æ„ä¸€å¤©æ”¶ç›˜ä»·ä¸60æ—¥å‡çº¿åç¦»åœ¨-5%~20%ä¹‹é—´ã€‚
6ã€æ— å¤§å¹…å›æ’¤
    1ï¼‰å½“æ—¥æ”¶ç›˜ä»·æ¯”60æ—¥å‰çš„æ”¶ç›˜ä»·çš„æ¶¨å¹…å°äº0.6ã€‚
    2ï¼‰æœ€è¿‘60æ—¥ï¼Œä¸èƒ½æœ‰å•æ—¥è·Œå¹…è¶…7%ã€é«˜å¼€ä½èµ°7%ã€ä¸¤æ—¥ç´¯è®¡è·Œå¹…10%ã€ä¸¤æ—¥é«˜å¼€ä½èµ°ç´¯è®¡10%ã€‚
7ã€æµ·é¾Ÿäº¤æ˜“æ³•åˆ™
    æœ€åä¸€ä¸ªäº¤æ˜“æ—¥æ”¶å¸‚ä»·ä¸ºæŒ‡å®šåŒºé—´å†…æœ€é«˜ä»·ã€‚
    1ï¼‰å½“æ—¥æ”¶ç›˜ä»·>=æœ€è¿‘60æ—¥æœ€é«˜æ”¶ç›˜ä»·ã€‚
8ã€é«˜è€Œçª„çš„æ——å½¢
    1ï¼‰å¿…é¡»è‡³å°‘ä¸Šå¸‚äº¤æ˜“60æ—¥ã€‚
    2ï¼‰å½“æ—¥æ”¶ç›˜ä»·/ä¹‹å‰24~10æ—¥çš„æœ€ä½ä»·>=1.9ã€‚
    3ï¼‰ä¹‹å‰24~10æ—¥å¿…é¡»è¿ç»­ä¸¤å¤©æ¶¨å¹…å¤§äºç­‰äº9.5%ã€‚
9ã€æ”¾é‡è·Œåœã€‚
    1ï¼‰è·Œ>9.5%ã€‚
    2ï¼‰æˆäº¤é¢ä¸ä½äº2äº¿ã€‚
    3ï¼‰æˆäº¤é‡è‡³å°‘æ˜¯5æ—¥å¹³å‡æˆäº¤é‡çš„4å€ã€‚
10ã€ä½ATRæˆé•¿
    1ï¼‰å¿…é¡»è‡³å°‘ä¸Šå¸‚äº¤æ˜“250æ—¥ã€‚
    2ï¼‰æœ€è¿‘10ä¸ªäº¤æ˜“æ—¥çš„æœ€é«˜æ”¶ç›˜ä»·å¿…é¡»æ¯”æœ€è¿‘10ä¸ªäº¤æ˜“æ—¥çš„æœ€ä½æ”¶ç›˜ä»·é«˜1.1å€ã€‚
11ã€è‚¡ç¥¨åŸºæœ¬é¢é€‰è‚¡
    1ï¼‰å¸‚ç›ˆç‡å°äºç­‰äº20ï¼Œä¸”å¤§äº0ã€‚
    2ï¼‰å¸‚å‡€ç‡å°äºç­‰äº10ã€‚
    3ï¼‰å‡€èµ„äº§æ”¶ç›Šç‡å¤§äºç­‰äº15ã€‚
```

![](img/04.jpg)

## å…«ï¼šé€‰è‚¡éªŒè¯


å¯¹æŒ‡æ ‡ã€ç­–ç•¥ç­‰é€‰å‡ºçš„è‚¡ç¥¨è¿›è¡Œå›æµ‹ï¼ŒéªŒè¯ç­–ç•¥çš„æˆåŠŸç‡ï¼Œæ˜¯å¦å¯ç”¨ã€‚


![](img/05.jpg)

## ä¹ï¼šè‡ªåŠ¨äº¤æ˜“

æ”¯æŒè‡ªåŠ¨äº¤æ˜“ï¼Œå†…ç½®è‡ªåŠ¨æ‰“æ–°è‚¡çš„ç­–ç•¥åŠç¤ºä¾‹ç­–ç•¥ï¼Œç”±äº**æ¶‰åŠé‡‘é’±**ï¼Œè§„é¿å¯èƒ½å­˜åœ¨é£é™©ï¼Œæ²¡æœ‰æä¾›å…¶ä»–äº¤æ˜“ç­–ç•¥ã€‚

å…·æœ‰äº¤æ˜“æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒä¸ºæ¯ä¸ªäº¤æ˜“ç­–ç•¥é…ç½®äº¤æ˜“æ—¥å¿—ã€‚

**ç‰¹åˆ«æé†’**ï¼šäº¤æ˜“æ—¥10:00ç‚¹ä¼šè§¦å‘æ‰“æ–°ï¼Œä¸æƒ³æ‰“æ–°çš„åˆ é™¤stagging.pyæˆ–ä¸è¦å¯åŠ¨â€œäº¤æ˜“æœåŠ¡â€ã€‚

![](img/11.jpg)

## åï¼šå…³æ³¨åŠŸèƒ½

æ”¯æŒè‚¡ç¥¨å…³æ³¨ï¼Œå…³æ³¨è‚¡ç¥¨åœ¨å„ä¸ªæ¨¡å—(å«æœ‰çš„)ç½®é¡¶ã€æ ‡çº¢æ˜¾ç¤ºã€‚

## åä¸€ï¼šæ”¯æŒæ‰¹é‡


å¯ä»¥é€šè¿‡æ—¶é—´æ®µã€æšä¸¾æ—¶é—´ã€å½“å‰æ—¶é—´è¿›è¡ŒæŒ‡æ ‡è®¡ç®—ã€ç­–ç•¥é€‰è‚¡åŠå›æµ‹ç­‰ã€‚åŒæ—¶æ”¯æŒæ™ºèƒ½è¯†åˆ«äº¤æ˜“æ—¥ï¼Œå¯ä»¥è¾“å…¥ä»»æ„æ—¥æœŸã€‚

å…·ä½“æ‰§è¡Œè®¾ç½®å¦‚ä¸‹ï¼š
```
------æ•´ä½“ä½œä¸šï¼Œæ”¯æŒæ‰¹é‡ä½œä¸š------
å½“å‰æ—¶é—´ä½œä¸š python execute_daily_job.py
å•ä¸ªæ—¶é—´ä½œä¸š python execute_daily_job.py 2022-03-01
æšä¸¾æ—¶é—´ä½œä¸š python execute_daily_job.py 2022-01-01,2021-02-08,2022-03-12
åŒºé—´æ—¶é—´ä½œä¸š python execute_daily_job.py 2022-01-01 2022-03-01

------å•åŠŸèƒ½ä½œä¸šï¼Œæ”¯æŒæ‰¹é‡ä½œä¸šï¼Œå›æµ‹æ•°æ®è‡ªåŠ¨å¡«è¡¥åˆ°å½“å‰
åŸºç¡€æ•°æ®å®æ—¶ä½œä¸š python basic_data_daily_job.py
åŸºç¡€æ•°æ®éå®æ—¶ä½œä¸š python basic_data_other_daily_job.py
æŒ‡æ ‡æ•°æ®ä½œä¸š python indicators_data_daily_job.py
Kçº¿å½¢æ€ä½œä¸š klinepattern_data_daily_job.py
ç­–ç•¥æ•°æ®ä½œä¸š python strategy_data_daily_job.py
å›æµ‹æ•°æ® python backtest_data_daily_job.py
```
## åäºŒï¼šæ”¯æŒä»£ç†

æ”¯æŒå¤šä»£ç†è·å–æ•°æ®ã€‚ç”±äºå¾ˆå¤šç½‘ç«™å¯¹å¤§é‡è¯·æ±‚æœ‰é˜²æŠ¤æœºåˆ¶ï¼Œä½¿ç”¨å•ä¸€IPåœ°å€é¢‘ç¹è®¿é—®å¯èƒ½å¯¼è‡´è¢«å°ç¦æˆ–é™åˆ¶è®¿é—®ã€‚ä»£ç†IPèƒ½å¤Ÿå¸®åŠ©åˆ†æ•£è¯·æ±‚æ¥æºï¼Œé¿å…å•ä¸€IPè¢«å°é”ï¼Œä»è€Œä¿è¯çˆ¬è™«ç¨‹åºçš„ç¨³å®šè¿è¡Œã€‚

## åä¸‰ï¼šå­˜å‚¨é‡‡ç”¨æ•°æ®åº“è®¾è®¡

æ•°æ®å­˜å‚¨é‡‡ç”¨æ•°æ®åº“è®¾è®¡ï¼Œèƒ½ä¿å­˜å†å²æ•°æ®ï¼Œä»¥åŠå¯¹æ•°æ®è¿›è¡Œæ‰©å±•åˆ†æã€ç»Ÿè®¡ã€æŒ–æ˜ã€‚ç³»ç»Ÿå®ç°è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ã€æ•°æ®è¡¨ï¼Œå°è£…äº†æ‰¹é‡æ›´æ–°ã€æ’å…¥æ•°æ®ï¼Œæ–¹ä¾¿ä¸šåŠ¡æ‰©å±•ã€‚

![](img/07.jpg)

## åå››ï¼šå±•ç¤ºé‡‡ç”¨webè®¾è®¡

é‡‡ç”¨webè®¾è®¡ï¼Œå¯è§†åŒ–å±•ç¤ºç»“æœã€‚å¯¹å±•ç¤ºè¿›è¡Œå°è£…ï¼Œæ·»åŠ æ–°çš„ä¸šåŠ¡è¡¨å•ï¼Œåªéœ€è¦é…ç½®è§†å›¾å­—å…¸å°±å¯è‡ªåŠ¨å‡ºç°ä¸šåŠ¡å¯è§†åŒ–ç•Œé¢ï¼Œæ–¹ä¾¿ä¸šåŠ¡åŠŸèƒ½æ‰©å±•ã€‚

## åäº”ï¼šè¿è¡Œé«˜æ•ˆ


é‡‡ç”¨å¤šçº¿ç¨‹ã€å•ä¾‹å…±äº«èµ„æºæœ‰æ•ˆæé«˜è¿ç®—æ•ˆç‡ã€‚1å¤©æ•°æ®çš„æŠ“å–ã€è®¡ç®—æŒ‡æ ‡ã€å½¢æ€è¯†åˆ«ã€ç­–ç•¥é€‰è‚¡ã€å›æµ‹ç­‰å…¨éƒ¨ä»»åŠ¡è¿è¡Œæ—¶é—´å¤§æ¦‚4åˆ†é’Ÿï¼ˆæ™®é€šç¬”è®°æœ¬ï¼‰ï¼Œè®¡ç®—å¤©æ•°è¶Šå¤šæ•ˆç‡è¶Šé«˜ã€‚


## åå…­ï¼šæ–¹ä¾¿è°ƒè¯•

ç³»ç»Ÿè¿è¡Œçš„é‡è¦æ—¥å¿—è®°å½•åœ¨stock_execute_job.log(æ•°æ®æŠ“å–ã€å¤„ç†ã€åˆ†æ)ã€stock_web.log(webæœåŠ¡)ã€stock_trade.log(äº¤æ˜“æœåŠ¡)ï¼Œæ–¹ä¾¿è°ƒè¯•å‘ç°é—®é¢˜ã€‚

![](img/08.jpg)


# å®‰è£…è¯´æ˜

æœ¬ç³»ç»Ÿæ”¯æŒWindowsã€Linuxã€MacOSï¼ŒåŒæ—¶æœ¬ç³»ç»Ÿåˆ›å»ºäº†Dockeré•œåƒï¼ŒæŒ‰è‡ªå·±éœ€è¦é€‰æ‹©å®‰è£…æ–¹å¼ã€‚

ä¸‹é¢æŒ‰åˆ†å¸¸è§„å®‰è£…æ–¹å¼ã€dockeré•œåƒå®‰è£…æ–¹å¼è¿›è¡Œä¸€ä¸€è¯´æ˜ã€‚

## ä¸€ï¼šå¸¸è§„å®‰è£…æ–¹å¼

å»ºè®®windowsä¸‹å®‰è£…ï¼Œæ–¹ä¾¿æ“ä½œåŠä½¿ç”¨ç³»ç»Ÿï¼ŒåŒæ—¶å®‰è£…ä¹Ÿéå¸¸ç®€å•ã€‚

ä»¥ä¸‹å®‰è£…åŠè¿è¡Œä»¥windowsä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚

### 1.å®‰è£…python

é¡¹ç›®å¼€å‘ä½¿ç”¨python 3.11ï¼Œå»ºè®®æœ€æ–°ç‰ˆã€‚

```
ï¼ˆ1ï¼‰åœ¨å®˜ç½‘ https://www.python.org/downloads/ ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸€é”®å®‰è£…å³å¯ï¼Œå®‰è£…åˆ‡è®°å‹¾é€‰è‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
ï¼ˆ2ï¼‰é…ç½®æ°¸ä¹…å…¨å±€å›½å†…é•œåƒåº“ï¼ˆå› ä¸ºæœ‰å¢™ï¼Œæ— æ³•æ­£å¸¸å®‰è£…åº“æ–‡ä»¶ï¼‰ï¼Œæ‰§è¡Œå¦‚ä¸‹doså‘½ä»¤ï¼š
python pip config --global set  global.index-url https://mirrors.aliyun.com/pypi/simple/
# å¦‚æœä½ åªæƒ³ä¸ºå½“å‰ç”¨æˆ·è®¾ç½®ï¼Œä½ ä¹Ÿå¯ä»¥å»æ‰ä¸‹é¢çš„"--global"é€‰é¡¹
```
### 2.å®‰è£…mysql

å»ºè®®æœ€æ–°ç‰ˆã€‚

```
åœ¨å®˜ç½‘ https://dev.mysql.com/downloads/mysql/ ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸€é”®å®‰è£…å³å¯ã€‚
```
### 3.å®‰è£… TA-Lib å…±äº«é™æ€åº“å’Œå¤´æ–‡ä»¶

å®‰è£… TA-Lib C/C++ å…±äº«é™æ€åº“å’Œå¤´æ–‡ä»¶

```
https://ta-lib.org/install/ ä¸‹è½½æœ€æ–° ta-lib å…±äº«é™æ€åº“å’Œå¤´æ–‡ä»¶ï¼ŒæŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…ã€‚
å®‰è£…æ–¹å¼æŒ‰å®˜æ–¹å»ºè®®ï¼Œä¼šæ›´ç®€å•ï¼š
Windows Executable Installer
macOS Homebrew
Linux Debian packages
```

### 4.å®‰è£…ä¾èµ–åº“

ä¾èµ–åº“éƒ½æ˜¯ç›®å‰æœ€æ–°ç‰ˆæœ¬ã€‚

a.å®‰è£…ä¾èµ–åº“ï¼š

```
#dosåˆ‡æ¢åˆ°æœ¬ç³»ç»Ÿçš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š
python pip install -r requirements.txt
```
b.è‹¥æƒ³å‡çº§é¡¹ç›®ä¾èµ–åº“è‡³æœ€æ–°ç‰ˆï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•ï¼š

å…ˆæ‰“å¼€requirements.txtï¼Œç„¶åä¿®æ”¹æ–‡ä»¶ä¸­çš„â€œ==â€ä¸ºâ€œ>=â€ï¼Œæ¥ç€æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š

```
python pip install -r requirements.txt --upgrade
```

c.è‹¥æ‰©å±•äº†æœ¬é¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•ç”Ÿæˆé¡¹ç›®ä¾èµ–ï¼š

```
#ä½¿ç”¨pipreqsç”Ÿæˆé¡¹ç›®ç›¸å…³ä¾èµ–çš„requirements.txt

python pip install pipreqs
# å®‰è£…pipreqsï¼Œè‹¥æœ‰å®‰è£…å¯è·³è¿‡

python  pipreqs --encoding utf-8 --force ./ 
# æœ¬é¡¹ç›®æ˜¯utf-8ç¼–ç 
```


### 5.å®‰è£… Navicatï¼ˆå¯é€‰ï¼‰

Navicatå¯ä»¥æ–¹ä¾¿ç®¡ç†æ•°æ®åº“ï¼Œä»¥åŠå¯ä»¥æ‰‹å·¥å¯¹æ•°æ®è¿›è¡ŒæŸ¥çœ‹ã€å¤„ç†ã€åˆ†æã€æŒ–æ˜ã€‚

Navicatæ˜¯ä¸€å¥—å¯åˆ›å»ºå¤šä¸ªè¿æ¥çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œç”¨ä»¥æ–¹ä¾¿ç®¡ç† MySQLã€Oracleã€PostgreSQLã€SQLiteã€SQL Serverã€MariaDB å’Œ MongoDB ç­‰ä¸åŒç±»å‹çš„æ•°æ®åº“

```
ï¼ˆ1ï¼‰åœ¨å®˜ç½‘ https://www.navicat.com.cn/download/navicat-premium ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸€é”®å®‰è£…å³å¯ã€‚

ï¼ˆ2ï¼‰ç„¶åä¸‹è½½ç ´è§£è¡¥ä¸: https://pan.baidu.com/s/18XpTHrm9OiLEl3u6z_uxnw æå–ç : 8888 ï¼Œç ´è§£å³å¯ã€‚
```
### 6.é…ç½®æ•°æ®åº“

ä¸€èˆ¬å¯èƒ½ä¼šä¿®æ”¹çš„ä¿¡æ¯æ˜¯â€æ•°æ®åº“è®¿é—®å¯†ç â€œã€‚

ä¿®æ”¹database.pyç›¸å…³ä¿¡æ¯:

```
db_host = "localhost"  # æ•°æ®åº“æœåŠ¡ä¸»æœº
db_user = "root"  # æ•°æ®åº“è®¿é—®ç”¨æˆ·
db_password = "root"  # æ•°æ®åº“è®¿é—®å¯†ç 
db_port = 3306  # æ•°æ®åº“æœåŠ¡ç«¯å£
db_charset = "utf8mb4"  # æ•°æ®åº“å­—ç¬¦é›†
```

### 7.é…ç½®ä»£ç†

#### 7.1 ä»£ç†å¿…è¦æ€§è¯´æ˜
ç”±äºæ¯æ—¥æ•°æ®è·å–ä½¿ç”¨å°è£…çš„ akshare ä»ä¸œæ–¹è´¢å¯Œæ¥å£è·å–æ•°æ®ï¼Œé¢‘ç¹è¯·æ±‚å¯èƒ½å¯¼è‡´IPè¢«é™åˆ¶ã€‚å»ºè®®è´­ä¹°ä»£ç†æœåŠ¡ä»¥ç¡®ä¿æ•°æ®è·å–ç¨³å®šæ€§ã€‚

#### 7.2 ä»£ç†é…ç½®æ–¹å¼

**æ–¹å¼ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ¨èï¼‰**
```bash
# é’æœä»£ç†ç¤ºä¾‹
export qg_authKey="your_auth_key"
export qg_password="your_password"
```

**æ–¹å¼äºŒï¼šä¿®æ”¹ä»£ç†æ± æ–‡ä»¶**
æ ¹æ®è´­ä¹°çš„ä»£ç†å“ç‰Œï¼Œä¿®æ”¹ `instock/core/proxy_pool.py` ä¸­çš„ä»£ç†è·å–é€»è¾‘ã€‚

#### 7.3 æ”¯æŒçš„ä»£ç†ç±»å‹
- **é’æœä»£ç†**ï¼šæŒ‰é‡ä»˜è´¹çŸ­æ•ˆä»£ç†ï¼ˆ1-5åˆ†é’Ÿï¼‰ï¼Œå†…ç½®ç¼“å­˜æœºåˆ¶
- **å…¶ä»–ä»£ç†å•†**ï¼šå¯è‡ªè¡Œä¿®æ”¹ `proxy_pool.py` é€‚é…ä¸åŒæ¥å£
- **é™æ€ä»£ç†**ï¼šç¼–è¾‘ `proxy.txt` æ–‡ä»¶ï¼Œæ ¼å¼ä¸º `ip:port` æˆ– `username:password@ip:port`

#### 7.4 ä»£ç†é…ç½®è¯´æ˜
```python
# ä¸ä½¿ç”¨ä»£ç†ï¼ˆé»˜è®¤ï¼‰
ä¸è®¾ç½®ä»»ä½•ç¯å¢ƒå˜é‡æˆ–ä»£ç†æ–‡ä»¶

# ä½¿ç”¨é’æœä»£ç†
export qg_authKey="your_auth_key"
export qg_password="your_password"

# ä½¿ç”¨é™æ€ä»£ç†æ–‡ä»¶
ç¼–è¾‘ proxy.txtï¼Œæ·»åŠ ä»£ç†åˆ—è¡¨ï¼š
127.0.0.1:7860
52.13.248.29:3128
abc:123456@35.178.104.4:80
```

**æ³¨æ„**ï¼š
- ä»£ç†é…ç½®ä¿®æ”¹åéœ€è¦é‡å¯ç³»ç»Ÿæ‰èƒ½ç”Ÿæ•ˆ
- é’æœä»£ç†æ”¯æŒæ™ºèƒ½ç¼“å­˜ï¼Œé¿å…é¢‘ç¹è·å–çŸ­æ•ˆä»£ç†
- ä»¥ä¸Šç¤ºä¾‹ä»£ç†å‡ä¸ºæ— æ•ˆä»£ç†ï¼Œè¯·ä½¿ç”¨çœŸå®è´­ä¹°çš„ä»£ç†

### 8.å®‰è£…è‡ªåŠ¨äº¤æ˜“ï¼ˆå¯é€‰ï¼‰

```
1.å®‰è£…äº¤æ˜“è½¯ä»¶
    1.1 é€šç”¨åŒèŠ±é¡ºå®¢æˆ·ç«¯åˆ¸å•†çš„å®¢æˆ·
        é€šç”¨åŒèŠ±é¡ºå®¢æˆ·ç«¯:
        https://activity.ths123.com/acmake/cache/1361.html
    1.2 ä¸“ç”¨åŒèŠ±é¡ºå®¢æˆ·ç«¯åˆ¸å•†çš„å®¢æˆ·
        è‡ªè¡Œå»åˆ¸å•†å®˜ç½‘æ‰¾åŒèŠ±é¡ºä¸“ç”¨ç‰ˆ
        ä¾‹å¦‚ï¼šå¹¿å‘çš„ä¸‹è½½æ ¸æ–°ç‹¬ç«‹å§”æ‰˜ç«¯(åŒèŠ±é¡ºç‰ˆ):
        http://www.gf.com.cn/softdownload/index?tab=1
2.å®‰è£…tesseract(è‡ªåŠ¨è¯†åˆ«éªŒè¯ç )
    ç¬¬ä¸€ç§æ–¹æ³•.ä¸‹è½½ç¼–è¯‘å¥½çš„
        åœ¨ä¸‹é¢é“¾æ¥é¡µï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©ç›¸åº”ç‰ˆæœ¬
        https://digi.bib.uni-mannheim.de/tesseract/
    ç¬¬äºŒç§æ–¹æ³•.ç”¨æºç ç¼–è¯‘
        ä¸‹è½½æºç ï¼šhttps://github.com/tesseract-ocr/tesseract
    æ³¨æ„ï¼š
        å®‰è£…å®Œè¦å°†å®‰è£…è·¯å¾„è®¾ç½®åˆ°PATHç¯å¢ƒå˜é‡é‡Œã€‚
        ä¸‹é¢æä¾›doså‘½ä»¤è®¾ç½®ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdï¼Œè¾“å…¥:
        setx /m PATH "%PATH%;C:\Program Files\Tesseract-OCR"
3.è®¾ç½®äº¤æ˜“é…ç½®   
    3.1.ä¿®æ”¹trade_client.json
        "user": "888888888888",               #äº¤æ˜“è´¦å·
        "password": "888888",                 #äº¤æ˜“å¯†ç 
        "exe_path": "C:/gfzqrzrq/xiadan.exe"  #äº¤æ˜“è½¯ä»¶è·¯å¾„
    3.2.ä¿®æ”¹trade_service.py
        broker = 'gf_client' #è¿™æ˜¯å¹¿å‘
        è¯¦æƒ…å‚é˜…usage.mdï¼Œé…ç½®å¯¹åº”åˆ¸å•†
```

### 9.è¿è¡Œè¯´æ˜

#### 9.1.æ‰§è¡Œæ•°æ®æŠ“å–ã€å¤„ç†ã€åˆ†æã€è¯†åˆ«

æ”¯æŒæ‰¹é‡ä½œä¸šï¼Œå…·ä½“å‚è§run_job.batä¸­çš„æ³¨é‡Šè¯´æ˜ã€‚

å»ºè®®å°†å…¶åŠ å…¥åˆ°ä»»åŠ¡è®¡åˆ’ä¸­ï¼Œå·¥ä½œæ—¥çš„æ¯å¤©17ï¼š00æ‰§è¡Œã€‚

**æ•°æ®æŠ“å–ã€å¤„ç†åŸåˆ™ï¼š**

1).å¼€ç›˜å³æœ‰ä¸”æ— å†å²æ•°æ®çš„ï¼šç»¼åˆé€‰è‚¡ã€æ¯æ—¥è‚¡ç¥¨æ•°æ®ã€è‚¡ç¥¨èµ„é‡‘æµå‘ã€è‚¡ç¥¨åˆ†çº¢é…é€ã€é¾™è™æ¦œã€æ¯æ—¥ETFæ•°æ®ï¼›

2).æ”¶ç›˜å³æœ‰ä¸”æœ‰å†å²æ•°æ®çš„ï¼šè‚¡ç¥¨æŒ‡æ ‡æ•°æ®ã€è‚¡ç¥¨Kçº¿å½¢æ€ã€è‚¡ç¥¨ç­–ç•¥æ•°æ®ï¼›

3).æ”¶ç›˜å1~2å°æ—¶æ‰æœ‰ä¸”æœ‰å†å²æ•°æ®çš„ï¼šå¤§å®—äº¤æ˜“ã€‚

è¿è¡Œrun_job.batï¼Œä¼šä¾æ®ä¸Šé¢åŸåˆ™è·å–å„æ¨¡å—å½“å‰æˆ–å‰ä¸ªäº¤æ˜“æ—¥çš„æ•°æ®ã€‚

```

è¿è¡Œ run_job.bat
```
è‹¥æƒ³çœ‹å¼€ç›˜åçš„å½“å‰å®æ—¶æ•°æ®ï¼Œå¯ä»¥è¿è¡Œä¸‹é¢ï¼Œå¾ˆå¿«å¤§æ¦‚1ç§’ï¼š

```
#åŸºç¡€æ•°æ®ä½œä¸š 
python basic_data_daily_job.py
```
#### 9.2.å¯åŠ¨webæœåŠ¡

```
è¿è¡Œ run_web.bat
```
å¯åŠ¨æœåŠ¡åï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼šhttp://localhost:9988/ ï¼Œå³å¯ä½¿ç”¨æœ¬ç³»ç»Ÿçš„å¯è§†åŒ–åŠŸèƒ½ã€‚

#### 9.3.å¯åŠ¨äº¤æ˜“æœåŠ¡

```
è¿è¡Œ run_trade.bat
```

## äºŒï¼šdockeré•œåƒå®‰è£…æ–¹å¼

æ²¡æœ‰dockerç¯å¢ƒï¼Œå¯ä»¥å‚è€ƒï¼š[VirtualBoxè™šæ‹Ÿæœºå®‰è£…Ubuntu](https://www.ljjyy.com/archives/2019/10/100590.html)ï¼Œé‡Œé¢ä¹Ÿä»‹ç»äº†pythonã€dockerç­‰å¸¸ç”¨è½¯ä»¶çš„å®‰è£…ï¼Œè‹¥æƒ³åœ¨Windowsä¸‹å®‰è£…dockerè‡ªè¡Œç™¾åº¦ã€‚

### 1.é…ç½®ä»£ç†
ä¸ä½¿ç”¨ä»£ç†ï¼Œè·³è¿‡æœ¬æ­¥ã€‚

ç³»ç»Ÿå®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ç¼–è¾‘å®¿ä¸»æœºçš„ä»£ç†æ–‡ä»¶ï¼Œæ¥é…ç½®ä»£ç†ã€‚

å…·ä½“è®¾ç½®å¦‚ä¸‹ï¼š
ç¼–è¾‘å®¿ä¸»çš„ä»£ç†æ–‡ä»¶ï¼Œæ·»åŠ æœ‰æ•ˆä»£ç†ï¼Œæ ¼å¼ä¸ºï¼šip:portï¼Œå¸¦è®¤è¯ä»£ç†username:password@ip:portï¼Œæ¯ä¸ªä»£ç†å ä¸€è¡Œã€‚å½“ä¸ä½¿ç”¨ä»£ç†æ—¶æ¸…ç©ºè¯¥æ–‡ä»¶ã€‚
ç¼–è¾‘å®Œä»£ç†æ–‡ä»¶ï¼Œè‹¥æœ¬ç³»ç»Ÿå·²ç»å¯åŠ¨ï¼Œéœ€è¦é‡å¯æœ¬ç³»ç»Ÿï¼Œæ‰èƒ½ç”Ÿæ•ˆã€‚
ç¤ºä¾‹åˆ›å»ºä»£ç†ï¼š
```
sudo sh -c 'echo "127.0.0.1:7860" > /data/instockproxy.txt'
#åˆ›å»ºä»£ç†æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨æ›¿æ¢æ‰åŸä»£ç†æ–‡ä»¶

sudo sh -c 'echo "52.13.248.29:3128" >> /data/instockproxy.txt'
#è¿½åŠ ä»£ç†

sudo sh -c 'echo "abc:123456@35.178.104.4:80" >> /data/instockproxy.txt'
#è¿½åŠ ä»£ç†
```
æ³¨æ„ï¼šä»¥ä¸Šå‡ä¸ºæ— æ•ˆä»£ç†ã€‚

### 2.å®‰è£…æ•°æ®åº“é•œåƒ

å¦‚æœå·²ç»æœ‰Mysqlã€mariadbæ•°æ®åº“å¯ä»¥è·³è¿‡æœ¬æ­¥ã€‚

è¿è¡Œä¸‹é¢å‘½ä»¤ï¼š

**ç‰¹åˆ«æé†’ï¼šæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·è¦æœ‰rootæƒé™ï¼Œå…¶ä»–å‘½ä»¤ä¹Ÿå¦‚æ­¤ã€‚ä¾‹å¦‚ï¼šubuntuç³»ç»Ÿåœ¨å‘½ä»¤å‰åŠ ä¸Šsudo** ï¼Œsudo docker......

```
docker network create InStockService

docker run -d --name InStockDbService \
    --network InStockService \
    -v /data/mariadb/data:/var/lib/instockdb \
    -e MYSQL_ROOT_PASSWORD=root \
    library/mariadb:latest
```

### 3.å®‰è£…æœ¬ç³»ç»Ÿé•œåƒ

a.è‹¥æŒ‰ä¸Šé¢ã€1.å®‰è£…æ•°æ®åº“é•œåƒã€‘è£…çš„æ•°æ®åº“ï¼Œè¿è¡Œä¸‹é¢å‘½ä»¤ï¼š

```
docker run -dit --name InStock --network=InStockService \
    -p 9988:9988 \
    -v /data/instockproxy.txt:/data/InStock/instock/config/proxy.txt \
    -e db_host=InStockDbService \
    mayanghua/instock:latest
```

b.å·²ç»æœ‰Mysqlã€mariadbæ•°æ®åº“ï¼Œè¿è¡Œä¸‹é¢å‘½ä»¤ï¼š

```
docker run -dit --name InStock \
    -p 9988:9988 \
    -v /data/instockproxy.txt:/data/InStock/instock/config/proxy.txt \
    -e db_host=localhost \
    -e db_user=root \
    -e db_password=root \
    -e db_database=instockdb \
    -e db_port=3306 \
    mayanghua/instock:latest
```

docker -e å‚æ•°è¯´æ˜ï¼š
```
db_host       # æ•°æ®åº“æœåŠ¡ä¸»æœº
db_user       # æ•°æ®åº“è®¿é—®ç”¨æˆ·
db_password   # æ•°æ®åº“è®¿é—®å¯†ç 
db_database   # æ•°æ®åº“åç§°
db_port       # æ•°æ®åº“æœåŠ¡ç«¯å£
```
æŒ‰è‡ªå·±æ•°æ®åº“å®é™…æƒ…å†µé…ç½®å‚æ•°ã€‚

### 4. ç³»ç»Ÿè¿è¡Œ

å¯åŠ¨å®¹å™¨åï¼Œä¼šè‡ªåŠ¨è¿è¡Œï¼Œé¦–å…ˆä¼šåˆå§‹åŒ–æ•°æ®ã€å¯åŠ¨webæœåŠ¡ã€‚ç„¶åæ¯å°æ—¶æ‰§è¡Œâ€œåŸºç¡€æ•°æ®æŠ“å–â€ï¼Œæ¯å¤©17:30æ‰§è¡Œæ‰€æœ‰çš„æ•°æ®æŠ“å–ã€å¤„ç†ã€åˆ†æã€è¯†åˆ«ã€å›æµ‹ã€‚

æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼šhttp://localhost:9988/ ï¼Œå³å¯ä½¿ç”¨æœ¬ç³»ç»Ÿçš„å¯è§†åŒ–åŠŸèƒ½ã€‚

### 5.å†å²æ•°æ®

å†å²æ•°æ®æŠ“å–ã€å¤„ç†ã€åˆ†æã€è¯†åˆ«ã€å›æµ‹ï¼Œè¿è¡Œä¸‹é¢å‘½ä»¤ï¼š

```
docker exec -it InStock bash 
cat InStock/instock/bin/run_job.sh
#æŸ¥çœ‹run_job.shæ³¨é‡Š,è‡ªå·±é€‰æ‹©ä½œä¸š
------æ•´ä½“ä½œä¸šï¼Œæ”¯æŒæ‰¹é‡ä½œä¸š------
å½“å‰æ—¶é—´ä½œä¸š python execute_daily_job.py
å•ä¸ªæ—¶é—´ä½œä¸š python execute_daily_job.py 2022-03-01
æšä¸¾æ—¶é—´ä½œä¸š python execute_daily_job.py 2022-01-01,2021-02-08,2022-03-12
åŒºé—´æ—¶é—´ä½œä¸š python execute_daily_job.py 2022-01-01 2022-03-01
------å•åŠŸèƒ½ä½œä¸šï¼Œæ”¯æŒæ‰¹é‡ä½œä¸šï¼Œå›æµ‹æ•°æ®è‡ªåŠ¨å¡«è¡¥åˆ°å½“å‰
ç»¼åˆé€‰è‚¡ä½œä¸š python selection_data_daily_job.py
åŸºç¡€æ•°æ®å®æ—¶ä½œä¸š python basic_data_daily_job.py
åŸºç¡€æ•°æ®æ”¶ç›˜2å°æ—¶åä½œä¸š python backtest_data_daily_job.py
åŸºç¡€æ•°æ®éå®æ—¶ä½œä¸š python basic_data_other_daily_job.py
æŒ‡æ ‡æ•°æ®ä½œä¸š python indicators_data_daily_job.py
Kçº¿å½¢æ€ä½œä¸š klinepattern_data_daily_job.py
ç­–ç•¥æ•°æ®ä½œä¸š python strategy_data_daily_job.py
å›æµ‹æ•°æ® python backtest_data_daily_job.py
ç¬¬ä¸€ç§æ–¹æ³•ï¼š
python execute_daily_job.py 2023-03-01,2023-03-02
ç¬¬äºŒç§æ–¹æ³•ï¼š
ä¿®æ”¹run_job.shï¼Œç„¶åè¿è¡Œ bash InStock/instock/bin/run_job.sh
```

### 6.æŸ¥çœ‹æ—¥å¿—

è¿è¡Œä¸‹é¢å‘½ä»¤ï¼š

```
docker exec -it InStock bash 
cat InStock/instock/log/stock_execute_job.log
cat InStock/instock/log/stock_web.log
```

### 7.dockerå¸¸ç”¨å‘½ä»¤

```
docker container stop InStock InStockDbService
#åœæ­¢å®¹å™¨
docker container prune
#å›æ”¶å®¹å™¨
docker rmi mayanghua/instock:latest library/mariadb:latest
#åˆ é™¤é•œåƒ
```

å…·ä½“å‚è§ï¼š[DockeråŸºç¡€ä¹‹ äºŒ.é•œåƒåŠå®¹å™¨çš„åŸºæœ¬æ“ä½œ](https://www.ljjyy.com/archives/2018/06/100208.html)

### 8.è‡ªåŠ¨äº¤æ˜“

ç›®å‰åªæ”¯æŒwindowsã€‚å‚è€ƒå¸¸è§„å®‰è£…æ–¹å¼,åªéœ€å®‰è£…pythonã€ä¾èµ–åº“ï¼Œ**ä¸éœ€å®‰è£…mysqlã€talibç­‰**ã€‚

# ç‰¹åˆ«å£°æ˜

è‚¡å¸‚æœ‰é£é™©æŠ•èµ„éœ€è°¨æ…ï¼Œæœ¬ç³»ç»Ÿåªèƒ½ç”¨äºå­¦ä¹ ã€è‚¡ç¥¨åˆ†æï¼ŒæŠ•èµ„ç›ˆäºæ¦‚ä¸è´Ÿè´£ã€‚

æœ¬ç³»ç»Ÿä¸­çš„è¡¨æ ¼ä¸ºç¬¬ä¸‰æ–¹å•†ä¸šæ§ä»¶ï¼Œä»…ä½¿ç”¨äº†è¯„ä¼°ç‰ˆè¿›è¡Œå­¦ä¹ åŠæµ‹è¯•ã€‚
